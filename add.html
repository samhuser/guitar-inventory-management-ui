<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Guitar</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="header">
  <a href="index.html"><h1>Guitar Inventory Management</h1></a>
  <div class="nav-links">
    <nav>
      <a href="about.html">About</a>
      <a href="add.html">Add</a>
      <a href="search.html">Search</a>
    </nav>
</div>
<div>
  
  <form id="addGuitarForm">
    <label for="serialNumber">Serial number:</label>
    <input type="text" id="serialNumber" name="serialNumber"><br><br>
    
    <label for="price">Price:</label>
    <input type="number" id="price" name="price" step="0.01"><br><br>
    
    <label for="builder">Builder:</label>
    <input type="text" id="builder" name="builder"><br><br>
    
    <label for="model">Model:</label>
    <input type="text" id="model" name="model"><br><br>
    
    <label for="type">Type:</label>
    <input type="text" id="type" name="type"><br><br>
    
    <label for="backWood">Back wood:</label>
    <input type="text" id="backWood" name="backWood"><br><br>
    
    <label for="topWood">Top wood:</label>
    <input type="text" id="topWood" name="topWood"><br><br>
    
    <button type="button" onclick="addGuitar()">Add the guitar</button>
  </form>
</div>

<script>
async function addGuitar() {
  let message = "";
  let host = "http://localhost:8080";
  var isGood = validateValue();
  console.log(isGood);
  if(isGood == false){
    alert("Error there are empty fields");
  }else{
    const guitar = {
      serialNumber: document.getElementById('serialNumber').value,
      price: parseFloat(document.getElementById('price').value),
      builder: document.getElementById('builder').value.toUpperCase(),
      model: document.getElementById('model').value,
      type: document.getElementById('type').value.toUpperCase(),
      backwood: document.getElementById('backWood').value.toUpperCase(),
      topwood: document.getElementById('topWood').value.toUpperCase()
    };
    let request = {
        method: "POST",
        headers: {
           "Content-Type": "application/json"
        },
        body: JSON.stringify(guitar)
    };
    let response = await fetch(host+"/add", request);
    if(response.status == 200) {
      message = "The guitar was added successfully!";
    } else {
      console.log(response);
      message = "Something went wrong! guitar data could not be saved.";
    }
    alert(message);
  }
}
function validateValue(){
  if(document.getElementById('serialNumber').value == null){
    return false;
  }else if(document.getElementById('price').value == null){
    return false;
  }else if(document.getElementById('builder').value== null){
    return false;
  }else if (document.getElementById('model').value== null){
    return false;
  }else if (document.getElementById('type').value== null){
    return false;
  }else if(document.getElementById('backWood').value== null){
    return false;
  }else if(document.getElementById('topWood').value == null){
    return false;
  }else{
    return true;
  }
}
</script>

</body>
</html>
